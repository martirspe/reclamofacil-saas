<main class="verify-email-container">
  <header class="verify-email-header">
    <div class="verify-email-brand">
      <svg class="verify-email-brand-logo" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
        <polyline points="14 2 14 8 20 8"></polyline>
        <line x1="12" y1="18" x2="12" y2="12"></line>
        <line x1="9" y1="15" x2="15" y2="15"></line>
      </svg>
      <span class="verify-email-brand__text">ReclamoFácil</span>
    </div>
    <app-theme-toggle />
  </header>

  <article class="verify-email-card">
    <h1 class="verify-email-title">Verifica tu correo</h1>
    @if (emailHint()) {
      <p class="verify-email-subtitle">Ingresa el código enviado a <strong>{{ emailHint() }}</strong></p>
    } @else {
      <p class="verify-email-subtitle">Ingresa el código enviado a tu correo</p>
    }

    <form class="verify-email-form" [formGroup]="form" (ngSubmit)="submit()" novalidate>
      <div class="form-group">
        <label class="form-label" for="verificationCode">Código de verificación</label>
        <div class="verify-email-input">
          <span class="verify-email-input-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="11" width="18" height="10" rx="2"></rect>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
          </span>
          <input id="verificationCode" formControlName="code" type="text" class="form-input" placeholder="123456" autocomplete="one-time-code" inputmode="numeric" pattern="[0-9]*" maxlength="6" required />
        </div>
        @if (codeControl.invalid && codeControl.touched) {
          <p class="form-error">
            @if (codeControl.hasError('required')) {
              <span>El código de verificación es obligatorio</span>
            } @else if (codeControl.hasError('minlength')) {
              <span>El código debe tener 6 dígitos</span>
            }
          </p>
        }
      </div>

      <button type="submit" class="btn btn-primary verify-email-primary-btn" [disabled]="isSubmitting()">
        @if (isSubmitting()) {
          <span class="verify-email-btn-loading">
            <svg class="spinner" viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 12a9 9 0 1 1-6.219-8.56"></path>
            </svg>
          </span>
          <span>Verificando...</span>
        } @else {
          <span>Verificar correo</span>
          <span class="verify-email-btn-icon">
            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
          </span>
        }
      </button>

      <button type="button" class="btn btn-outline verify-email-resend-btn" (click)="resendCode()" [disabled]="isResending()">
        @if (isResending()) {
          <span class="verify-email-btn-loading">
            <svg class="spinner" viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 12a9 9 0 1 1-6.219-8.56"></path>
            </svg>
          </span>
          <span>Reenviando...</span>
        } @else {
          <span class="verify-email-btn-icon">
            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="23 4 23 10 17 10"></polyline>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </svg>
          </span>
          <span>Reenviar código</span>
        }
      </button>
    </form>
  </article>

  <footer class="verify-email-footer">
    <p>&copy; 2026 ReclamoFácil</p>
  </footer>
</main>
