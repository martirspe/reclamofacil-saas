<div class="verify-email-page">
  <div class="brand">
    <img src="assets/images/logos/logo-light.png" alt="ReclamaFácil" class="brand-logo" />
  </div>
  <div class="verify-email-card">
    <div class="verify-email-header">
      <span class="badge">Onboarding · Paso 1 de 2</span>
      <h1>Verifica tu correo</h1>
      <p>Ingresa el código enviado a tu correo</p>
      @if (emailHint()) {
        <p class="email-hint">Correo: <strong>{{ emailHint() }}</strong></p>
      }
    </div>

    <form class="verify-email-form" [formGroup]="form" (ngSubmit)="submit()" autocomplete="on">
      <div class="field">
        <label class="field-label" for="verifyUserId">ID de usuario</label>
        <input 
          id="verifyUserId" 
          type="number" 
          placeholder="123"
          formControlName="userId"
          [attr.aria-invalid]="userIdControl.invalid && userIdControl.touched"
        />
        @if (userIdControl.invalid && userIdControl.touched) {
          <span class="field-error">
            El ID de usuario es obligatorio
          </span>
        }
      </div>

      <div class="field">
        <label class="field-label" for="verifyCode">Código de verificación</label>
        <input 
          id="verifyCode" 
          type="text" 
          placeholder="ABC123"
          formControlName="code"
          [attr.aria-invalid]="codeControl.invalid && codeControl.touched"
        />
        @if (codeControl.invalid && codeControl.touched) {
          <span class="field-error">
            @if (codeControl.hasError('required')) {
              El código es obligatorio
            }
            @if (codeControl.hasError('minlength')) {
              El código debe tener al menos 6 caracteres
            }
          </span>
        }
      </div>

      <button 
        class="btn-primary" 
        type="submit"
        [disabled]="isSubmitting() || form.invalid"
      >
        {{ isSubmitting() ? 'Verificando...' : 'Verificar correo' }}
      </button>

      <div class="actions">
        <button 
          class="btn-ghost" 
          type="button" 
          (click)="resendCode()" 
          [disabled]="isResending()"
        >
          {{ isResending() ? 'Reenviando...' : 'Reenviar código' }}
        </button>
        <button class="btn-link" type="button" (click)="goToLogin()">
          Volver a iniciar sesión
        </button>
      </div>
    </form>
  </div>

  <div class="footer">
    <p class="copyright">© 2026 ReclamaFácil</p>
    <app-theme-toggle></app-theme-toggle>
  </div>
  <app-toast-container />
</div>
